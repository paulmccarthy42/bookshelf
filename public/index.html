<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shlf</title>
  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
  

  <!-- Vue -->
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.js"></script>
  <script src="index.js" defer></script>

  <!-- THEME -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">
  <meta name="author" content="Tanislav Robert">
  <meta name="description" content="KARMO is a creative and modern template for digital agencies">

  <!-- STYLES -->
  <link rel="stylesheet" href="assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/css/flexslider.css">
  <link rel="stylesheet" href="assets/css/animsition.min.css">
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/owl.carousel.css">
  <link rel="stylesheet" href="assets/css/owl.theme.css">

  <!-- Fontawesome -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css">

</head>

<body class="animsition">
  <div id="app">
     <span class="frame-line top-frame visible-lg"></span>
    <span class="frame-line right-frame visible-lg"></span>
    <!-- <span class="frame-line bottom-frame visible-lg"></span> -->
    <span class="frame-line left-frame visible-lg"></span>

    <header class="main-header">
      <div class='container-fluid'>
        <div class="box-header">
            <div class="box-logo">
                <a href="/#/"><img src="assets/img/read.png" width="80" alt="Logo"></a>
            </div>
            <!-- box-nav -->
            <a class="box-primary-nav-trigger">
                <span class="box-menu-icon"></span>
            </a>
            <!-- box-primary-nav-trigger -->
        </div>
        <nav>
          <ul class="box-primary-nav">
              <li class="box-label">Shelf</li>

              <li><a href="/#/" v-on:click="toggleHeader">Home</a> <i class="lnr lnr-home"></i></li> 
              <li><a href="#/book/search" v-on:click="toggleHeader">Browse Books</a></li>
              <div v-if="signedIn">
                <li><a href="#/logout" v-on:click="toggleHeader">Log Out</a></li>
              </div>
              <div v-else>
                <li>
                  <ul>
                    <li class="text-danger" v-for="error in errors">{{ error }}</li>
                  </ul>
                  <div class="form-group">
                    <label>Email:</label>
                    <input type="email" class="form-control" v-model="email">
                  </div>
                  <div class="form-group">
                    <label>Password:</label>
                    <input type="password" class="form-control" v-model="password">
                  </div>
                </li>
                <li><a v-on:click="submit" v-on:click="toggleHeader">Log In</a></li>
                <li><a href="#/sign_up" v-on:click="toggleHeader">Sign Up New User</a></li>
              </div>
          </ul>
        </nav>
      </div>
    </header>
    <router-view></router-view>
  </div>

  </script>
  <!-- Javascripting -->
  <script type="text/javascript" src="assets/js/jquery-2.2.3.min.js"></script>
  <script type="text/javascript" src="assets/js/animated-headline.js"></script>
  <script type="text/javascript" src="assets/js/menu.js"></script>
  <script type="text/javascript" src="assets/js/modernizr.js"></script>
  <script type="text/javascript" src="assets/js/isotope.pkgd.min.js"></script>
  <script type="text/javascript" src="assets/js/jquery.flexslider-min.js"></script>
  <script type="text/javascript" src="assets/js/jquery.animsition.min.js"></script>
  <script type="text/javascript" src="assets/js/init.js"></script>
  <script type="text/javascript" src="assets/js/main.js"></script>
  <script type="text/javascript" src="assets/js/smooth-scroll.js"></script>
  <script type="text/javascript" src="assets/js/numscroller.js"></script>
  <script type="text/javascript" src="assets/js/wow.min.js"></script>
  <script type="text/javascript" src="assets/js/owl.carousel.min.js"></script>

 

  <script type="text/javascript">
    $(window).load(function() {
      new WOW().init();

      // initialise flexslider
      $('.flexslider').flexslider({
        animation: "fade",
        directionNav: true,
        controlNav: false,
        keyboardNav: true,
        slideToStart: 0,
        animationLoop: true,
        pauseOnHover: false,
        slideshowSpeed: 4000,
      });

      smoothScroll.init();

      // initialize isotope
      var $container = $('.portfolio_container');
      $container.isotope({
        filter: '*',
      });

      $('.portfolio_filter a').click(function(){
        $('.portfolio_filter .active').removeClass('active');
        $(this).addClass('active');

        var selector = $(this).attr('data-filter');
        $container.isotope({
          filter: selector,
          animationOptions: {
            duration: 500,
            animationEngine : "jquery"
          }
        });
        return false;
      });
    });
  </script>

  

</body>
</html>

<!-- Home Page with login screen, last book read, bookshelves, and recent notes -->
<template id="home-page">
  <div>
    <!-- Jumbotron -->
    <section class="box-intro bg-film">
      <div class="table-cell box-intro bg-film">

          <!-- <h3 class="box-headline letters rotate-2">
              <span class="box-words-wrapper">
                  <b class="is-visible">CLEAN &nbsp;&amp;&nbsp; CREATIVE.</b>
                  <b>&nbsp;SIMPLE &nbsp;&amp;&nbsp; POWERFUL.</b>
              </span>
          </h3> -->
          <h1>SHELF</h1>
          <h2>{{message}}</h2>
      </div>
      <!-- <div class="mouse">
          <div class="scroll"></div>
      </div> -->
    </section>

    <!-- Welcome back -->
    <section id="about" class="about mt-150 mb-50">
      <div class="container">
        <div class="row center">
          <div class="col-md-8 col-md-offset-2">
            <img src="assets/img/shelf.png" alt="Khaki HTML Template" width="300">
            <div class="km-space"></div>
            <h1 class="lead">{{message}}</h1>
            <div v-if="message === 'Please log in'">
              <a class="btn btn-success" href="#/login" >Log In</a> <!--  -->
              <a class="btn btn-primary" href="#/sign_up">Sign Up New User</a>
            </div>
            <h2>Text explaining purpose of site</h2>
            <div v-if="signedIn()">Last Book: {{currentUser.last_read_book}}</div>
          </div>
        </div><!-- description text -->
      </div>
    </section>

    <section  v-if="signedIn()" id="services" class="services mbr-box mbr-section mbr-section--relative mbr-section--fixed-size mbr-section--full-height mbr-section--bg-adapted mbr-parallax-background"  style="background-image: url(assets/img/voynich.jpg);">
      <div class="section-overlay"></div>
      <div class="container">
        <div class="row center">
          <div class="col-md-8 col-md-offset-2 col-sm-12">
            <div class="section-title-parralax">
               <div class="process-numbers">.</div>
              <h2>Helping you make sense of whatever this is since 2018</h2> 
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="portfolio" v-if="signedIn()">
      <div class="top-right-separator hidden-xs"></div>
      <div class="container">
        <div class="col-md-8 col-md-offset-2 col-sm-12">
          <div class="row center">
            <div class="section-title mb-100">
              <div class="process-numbers">03</div>
              <h2>Manage Bookshelves</h2>
            </div>
          </div>
        </div>
        <!-- categories  -->
        <div class="col-md-3">
          <div class="row categories-grid">
            <nav class="categories">
              <ul class="portfolio_filter">
                <li><a href="" class="active" data-filter="*">all</a></li>
                <div v-for="shelf in bookshelves">
                  <li><a  v-bind:data-filter="'.'+ shelf.classTitle" v-on:click="toggleActive(shelf.id)" v-bind:class="{ active : shelf.isActive}">{{shelf.title}}</a></li> <!-- this line needs to not refresh -->
                </div>
                <input type="text" placeholder="New Shelf Name" v-model='NewShelfName'>
                <li><a v-on:click="submitNewShelf" class="active">+ new shelf</a></li>
              </ul>
            </nav>
          </div>
        </div>

        <div class="col-md-9">
          <div class="row portfolio_container">
            <!-- add button -->
            <div class="col-md-4" style="position: relative;">
              <a href="#/book/search" class="portfolio_item work-grid">
                <img src="assets/img/add.png" alt="image">
                <div class="portfolio_item_hover">
                  <div class="item_info">
                    <span>Add New Book</span>
                  </div>
                </div>
              </a>
            </div> 
            <!-- books -->
            <div class="col-md-4" v-for="book in books" v-bind:class="book.shelf">
              <a v-bind:href="'#/book/' + book.id" class="portfolio_item work-grid">
                <img src="assets/img/work-1.jpg" alt="image">
                <div class="portfolio_item_hover">
                  <div class="item_info">
                    <span>{{book.title}}</span>
                    <em>{{book.author}}</em>
                  </div>
                </div>
              </a>
            </div>

            
          </div>
          <!-- end row -->
        </div>
        <!-- all works end -->
      </div>
      <!-- end container -->
    </section>
    <section v-if="signedIn()">  
      <p>last notes</p>
    </section>
    </div>
  </div>
</template>

<!-- User pages -->
<template id="signup-page">
  <div class="container">
    <h1>{{ message }}</h1>
    <div><input type="text" placeholder="Enter your User Name" v-model="newUser.name"></div>
    <div><input type="text" placeholder="Enter your Email Address" v-model="newUser.email"></div>
    <div><input type="password" placeholder="Enter your Password" v-model="newUser.password"></div>
    <div><input type="password" placeholder="Confirm your Password" v-model="newUser.password_confirmation"></div>
    <button v-on:click="signup">submit</button>
  </div>
</template>

<template id="login-page">
  <div class="container">
    <h1>Login</h1>
    <ul>
      <li class="text-danger" v-for="error in errors">{{ error }}</li>
    </ul>
    <div class="form-group">
      <label>Email:</label>
      <input type="email" class="form-control" v-model="email">
    </div>
    <div class="form-group">
      <label>Password:</label>
      <input type="password" class="form-control" v-model="password">
    </div>
    <button class="btn btn-primary" v-on:click="submit()">Submit</button>
  </div>
</template>

<!-- Summary for a book -->
<template id="book-page">
  <div class="container">
    <div class="site-hero_2">
      <div class="section-overlay"></div>
      <div class="page-title">
      </div>
    </div>

    <section class="project_descr">
    <div class="container mt-100">
      <div class="row center">
      <div class="col-md-8 col-md-offset-2 col-sm-12">
        <div class="section-title">
          <h2 class="mb-50">{{info.title}}</h2>
          <h5 class="mb-50">by {{info.author}}</h5>
          <a v-bind:href="'/read.html#/' + info.id"><button>read</button></a>
          <datalist id=titles>
            <option v-for="shelf in bookshelves">{{shelf.title}}</option>
          </datalist>
          <input type="text" placeholder="Search by title" v-model="selectedShelf" list="titles">
          <button v-on:click="shelveABook">add to shelf</button>
        </div>
      </div>
      </div>

      <div class="row mt-50">
        <div class="col-md-9 wow fadeInUp ">
          <div class="comment" v-for="comment in info.comments">
            <strong>{{comment.comment_text}}</strong> by {{comment.author}}
            <div class="subcomment" v-for="subcomment in comment.subcomments">{{subcomment.comment_text}} by {{subcomment.author}}</div>
            <div class="form-group">
            <input type="text" class="form-control" placeholder="What do you want to say?" v-model="subcommentsText.comment">
            <button id="submit_btn" class="default-btn gray-btn" v-on:click="addSubComment(comment.id)"> Add subcomment <i class="fa fa-angle-double-right" aria-hidden="true"></i></button> 
            </div>
          </div>
          <div >
            <div class="form-group">
            <input type="text" class="form-control" placeholder="What do you want to say?" v-model="comment">
            <button id="submit_btn" class="default-btn gray-btn" v-on:click="addComment"> Add comment <i class="fa fa-angle-double-right" aria-hidden="true"></i></button> 
            </div>
        </div>
        </div>
        <div class="col-md-3 wow fadeInUp" data-wow-delay=".1s">
          <ul class="project_list">
            <li>English language</li>
            <li>Genre: History</li>
            <li>{{info.pages}} Pages</li>
            <li>Published in {{info.published_year}}</li>
            <li>{{info.comments.length}} Comments</li>
            <li>{{info.comments.length}} Public Resources Posted</li>
          </ul>
        </div>
      </div>

      <div class="pages_pagination">
        <a href="/#/" class="all"><i class="lnr lnr-menu"></i></a>
        <a href="/#/" class="prev"><i class="lnr lnr-arrow-left"></i></a>
        <a href="/#/" class="next"><i class="lnr lnr-arrow-right"></i></a>
      </div>
    </div><!-- end container -->
  </section>
  </div>
</template>

<template id="search-book-page">
  <div>
    <section class="box-intro bg-film">
        <div class="table-cell box-intro bg-film">

            <!-- <h3 class="box-headline letters rotate-2">
                <span class="box-words-wrapper">
                    <b class="is-visible">CLEAN &nbsp;&amp;&nbsp; CREATIVE.</b>
                    <b>&nbsp;SIMPLE &nbsp;&amp;&nbsp; POWERFUL.</b>
                </span>
            </h3> -->
            <h1>SHELF</h1>
        </div>
        <!-- <div class="mouse">
            <div class="scroll"></div>
        </div> -->
      </section>

      <section class="project_descr">
        <div style="padding-left: 100px;">
          <div><h1>Read a text we already have</h1>
          <div v-for="book in booksOnfile">
            <p><strong><a v-bind:href="'#/book/' + book.id">{{book.title}}</a></strong> by {{book.author}}</p>
          </div>
          </div>
          <h1>Upload a new text</h1>
          <div v-if="OCRText!==''">
            <textarea v-model="OCRText"></textarea>
            <div>Book title: <input type="text" placeholder="title" v-model="newBook.title"></div>
            <div>Author: <input type="text" placeholder="first name first" v-model="newBook.author"></div>
            <div>Genre: <input type="text" placeholder="maybe a dropdown?" v-model="newBook.genre"></div>
            <div>Language: <input type="text" placeholder="def a dropdown" v-model="newBook.language"></div>
            <div>Year Published: <input type="number" placeholder="maybe a better approach" v-model="newBook.published_year"></div>

            <button v-on:click="submitBook">submit</button>
          </div>
          <div v-else>
            <h2>Select a scan to get your book started</h2>
            <input type="file" id="ocr_upload" v-on:change="uploadFile($event)">
          </div>
        </div>
    </section>
  </div>
</template>




