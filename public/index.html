<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Shlf</title>
  <!-- CSS -->
  <style type="index.css"></style>
  <!-- Vue -->
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.js"></script>
  <script src="index.js" defer></script>
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
</head>
<body>
  <div id="app">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">Navbar</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="/#/">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Account Options
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="#/login">Log In</a>
              <a class="dropdown-item" href="#/logout">Log Out</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#/sign_up">Sign Up New User</a>
            </div>
          </li>
        </ul>
        <form class="form-inline my-2 my-lg-0">
          <input class="form-control mr-sm-2" type="search" placeholder="Find Book by Title" aria-label="Search" v-model="searchTerm">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit" v-on:click="search">Search</button>
        </form>
      </div>
    </nav>
    <router-view></router-view>
  </div>
</body>
</html>

<!-- User pages -->
<template id="signup-page">
  <div class="container">
    <h1>{{ message }}</h1>
    <div><input type="text" placeholder="Enter your User Name" v-model="newUser.name"></div>
    <div><input type="text" placeholder="Enter your Email Address" v-model="newUser.email"></div>
    <div><input type="password" placeholder="Enter your Password" v-model="newUser.password"></div>
    <div><input type="password" placeholder="Confirm your Password" v-model="newUser.password_confirmation"></div>
    <button v-on:click="signup">submit</button>
  </div>
</template>

<template id="login-page">
  <div class="container">
    <h1>Login</h1>
    <ul>
      <li class="text-danger" v-for="error in errors">{{ error }}</li>
    </ul>
    <div class="form-group">
      <label>Email:</label>
      <input type="email" class="form-control" v-model="email">
    </div>
    <div class="form-group">
      <label>Password:</label>
      <input type="password" class="form-control" v-model="password">
    </div>
    <button class="btn btn-primary" v-on:click="submit()">Submit</button>
  </div>
</template>

<!-- Home Page with login screen, last book read, bookshelves, and recent notes -->
<template id="home-page">
  <div class="container">
    <h1>{{ message }}</h1>
    <div v-if="message === 'Please log in'">
      <a class="btn btn-success" href="#/login">Log In</a>
      <a class="btn btn-primary" href="#/sign_up">Sign Up New User</a>
    </div>
    <div v-if="message !== 'Please log in'"> <!-- bookshelf section-->
      <!-- Not working for some reason -->
      <div>Last Book</div>
      <p>______________________________________</p>

      <div v-for='shelf in bookshelves'>
        <h3><router-link v-bind:to="{path: '/bookshelves/' + shelf.id}"> {{shelf.title}}</router-link></h3>
        <div v-for="book in shelf.books"><router-link v-bind:to="{path: '/book/' + book.id}">{{book.title}} </router-link></div>

        <router-link class='btn btn-primary' v-bind:to = "{path: '/book/new/' + shelf.id}">add book</router-link>
      </div>
      <input type="text" placeholder="New Shelf Name" v-model='NewShelfName'>
      <button v-on:click="submitNewShelf">add new shelf</button>
      <p>______________________________________</p>
      <p>last notes</p>
    </div>
  </div>
</template>

<!-- Close up for specific bookshelf, maybe can be transitioned to a modal -->
<template id="bookshelf-page">
  <div class="container">
    <div>
      <h3>{{bookshelf.title}}</h3>
        <div v-for="book in bookshelf.books"><router-link v-bind:to="{path: '/book/' + book.id}">{{book.title}} </router-link></div>

        <router-link class='btn btn-primary' v-bind:to = "{path: '/book/new/' + bookshelf.id}">add book</router-link>
      </div>
      <a class="btn btn-outline-success" href="#/">Back</a>
  </div>
</template>

<!-- Close up for a book -->
<template id="book-page">
  <div class="container">
    <h1>{{ message }}</h1>
    <p>{{info}}</p>
    <a v-bind:href="'#/books/' + info.id + '/read/'"><button>read</button></a>
    <router-link v-bind:to="{path: '/'}"><button>back</button></router-link>
  </div>
</template>

<!-- basically the search function/ -->
<template id="add-book-page">
  <div>
    <div v-for="book in booksOnfile">
      <p><strong>{{book.title}}</strong> by {{book.author}}</p>
      <button v-on:click="shelveABook(book.id)">add</button>
      <!-- Build above out so that it shelves book, below so that it creates and shelves simultaneously -->
    </div>
    <!-- <div v-if="searching">
      <p>Please give me the Gutenberg ID of the book you want to add</p>
      <input type="number" v-model="bookInfo.gutenberg_id">  
      <button v-on:click = "searchGutenberg">search</button>
    </div>
    <div v-if="!searching">
      <div>Title: <input class = "new" type="text" v-model="bookInfo.title"></div>
      <div>Author: <input class = "new" type="text" v-model="bookInfo.author"></div>
      <div>Genre: <input class = "new" type="text" v-model="bookInfo.genre"></div>
      <div>Year Published: <input class = "new" type="number" v-model="bookInfo.published_year"></div>
      <button v-on:click="submitNewBook">Submit</button>
      <button v-on:click="toggleSearching">Back</button>
    </div> -->
  </div>
</template>

<template id="search-book-page">
  <div>
    <h2>Search Results:</h2>
    <p v-for="book in booksOnfile"><router-link v-bind:to="{ path: '/book/' + book.id}">{{book.title}}</router-link></p>
  </div>
</template>

<template id="read-page">
  <div class="container">
    <h1>Hello</h1>
    <div v-for="page in pages">
      <p>{{page.text}}</p>
      <p>{{page.page_number}}</p>
    </div>
    <router-link v-bind:to="{path: '/'}"><button>back to home</button></router-link>
  </div>
</template>



